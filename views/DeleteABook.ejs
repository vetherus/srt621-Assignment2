<html lang="en">

<head>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta charset="utf-8">
    </meta>
</head>

<body class="">
    <div class="background"></div>
    <h2 class="header pl-2 pr-2 pt-3 pb-3"> <i class="fa fa-book"></i> &nbsp;&nbsp;Delete a Book</h2>
    <div class="d-flex justify-content-center p-3 background-white mt-5">
        <div class="d-flex justify-content-center flex-column w-100 mt-1">
            <div class="w-100">
                <small  class="font-weight-bold p-1">To Delete a book,Click on  the red X Button.</small>

            </div>
            <hr>
            <div class="list-group container-list">
                <% for (var book of books) {%>
                       <a  class="list-group-item cursor-pointer">
                        <!-- <form action="/DeleteABook" method="post">
                            <input type="hidden" name="id" value="`<%= book.id %>`"> -->
                            <input style="color:red;" type="submit" value="X" onclick="Deletebook(`<%= book.id %>`)">
                        <!-- </form> -->
                        <%= book.name %></a>
                    <% } %>
                </div>
            <div>
                <hr>
                <div style="display: flex;width: 100%;">
                    <a href="<%= '/home' %>" class="list-group-item cursor-pointer" style="margin-right: 225px;  border: 1px solid black;"> List of books</a>
                    <a href="<%= '/AddNewBook' %>" class="list-group-item cursor-pointer"  style="margin-right: 225px;  border: 1px solid black;"> Add book</a>
                    <a href="<%= '/DeleteABook' %>" class="list-group-item cursor-pointer"style=" border: 1px solid black;">Delete a book</a>    
                </div>
            </div>
        </div>
    </div>

    <br>
    <footer>

    </footer>
    <script>
        async function Deletebook(id){
            console.log("id--=->",id)
            var proceed = confirm("Are you sure you want to delete?");
            if (proceed) {
             var myBody={ "id":id}
             const response = await fetch(`${window.location.origin}/DeleteABook`, {
                 method: 'POST',
                 body: JSON.stringify(myBody), // string or object
                 headers: {
                     'Content-Type': 'application/json'
                    }
                });
                const myJson = await response.json();
                     document.location.href='/home'
                console.log("true")
            } else {
               var base_url = window.location.origin;
               
                console.log("pathArray",base_url)
                console.log("false")
            }

        }
    </script>
</body>
</html>